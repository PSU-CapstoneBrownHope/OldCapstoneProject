{"ast":null,"code":"var _jsxFileName = \"/home/whiteknight/Desktop/capstone/OldCapstoneProject/front/src/components/Login/LoginForm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { routes } from \"../../util/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledForm = styled(Form)`\n  width: 100%;\n  margin: auto;\n`;\n_c = StyledForm;\nconst StyledLabel = styled(Form.Label)`\n  color: white;\n`;\n_c2 = StyledLabel;\nconst StyledSignupLoginContainer = styled.div`\n  margin-top: 20px;\n  display: flex;\n`;\n_c3 = StyledSignupLoginContainer;\nconst StyledLoginButton = styled(Button)`\n  width: 50%;\n`;\n_c4 = StyledLoginButton;\nconst StyledSignupButton = styled(Button)`\n  width: 50%;\n`;\n_c5 = StyledSignupButton;\nconst StyledSignUpSubmitButton = styled(Button)`\n  margin-top: 10px;\n`;\n_c6 = StyledSignUpSubmitButton;\nexport const LoginForm = () => {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [username, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [verifyPassword, setVerifyPassword] = useState(\"\");\n  const [signUpState, setSignUpState] = useState(false);\n  const history = useHistory();\n\n  const handleClick = () => history.push(\"/reset/verify-user\");\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0 && !signUpState;\n  }\n\n  function validateSignUp() {\n    return password === verifyPassword && email.length > 0 && username.length > 0;\n  }\n\n  function handleLoginSubmit(event) {\n    event.preventDefault();\n    const newLoginRequest = {\n      username: username,\n      password: password\n    }; // Was added for testing navbar, but may actually work for future use\n\n    function setUsername() {\n      return sessionStorage.setItem('username', newLoginRequest.username);\n    }\n\n    const sendLoginRequest = async () => {\n      try {\n        const resp = await axios.post(routes.login, newLoginRequest, {\n          withCredentials: true\n        });\n        console.log(resp.data);\n\n        if (resp.data === \"Success\") {\n          setUsername(); // added for testing navbar\n\n          history.push(\"/landing\");\n        } else if (resp.data === \"Failed\") {\n          alert(\"Sorry, wrong username or password. Please try again!\");\n        }\n      } catch (err) {\n        // Handle Error Here\n        console.error(err);\n        alert(\"Login Failed\");\n      }\n    };\n\n    sendLoginRequest();\n  }\n\n  function handleSignupSubmit(event) {\n    const newSignupRequest = {\n      username: username,\n      email: email,\n      password: password\n    };\n\n    const sendSignupRequest = async () => {\n      try {\n        const resp = await axios.post(routes.signup, newSignupRequest);\n        console.log(resp.data);\n\n        if (resp.data === \"Success\") {\n          alert(\"Account Creation Successful! Redirecting to login\");\n          history.push(\"/\");\n          setSignUpState(false);\n          setUserName(\"\");\n          setPassword(\"\");\n        } else if (resp.data === \"Email Already Exists\") {\n          alert(\"Sorry, user already exists\");\n        } else if (resp.data === \"Emailed\") {\n          alert(\"This email already exists in our system. To claim your account, please follow the link emailed to you.\");\n        }\n      } catch (err) {\n        alert(\"Sign up failed\"); // Handle Error Here\n\n        console.error(err);\n      }\n    };\n\n    sendSignupRequest();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: /*#__PURE__*/_jsxDEV(StyledForm, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"username\",\n        children: [/*#__PURE__*/_jsxDEV(StyledLabel, {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          autoFocus: true,\n          type: \"text\",\n          value: username,\n          onChange: e => setUserName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), !signUpState && /*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(StyledLabel, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), signUpState && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"email\",\n          children: [/*#__PURE__*/_jsxDEV(StyledLabel, {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            autoFocus: true,\n            type: \"email\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"password\",\n          children: [/*#__PURE__*/_jsxDEV(StyledLabel, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"confirmPassword\",\n          children: [/*#__PURE__*/_jsxDEV(StyledLabel, {\n            children: \"Confirm Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            value: verifyPassword,\n            onChange: e => setVerifyPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StyledSignUpSubmitButton, {\n          type: \"button\",\n          disabled: !validateSignUp(),\n          onClick: handleSignupSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(StyledSignupLoginContainer, {\n        children: [/*#__PURE__*/_jsxDEV(StyledLoginButton, {\n          variant: \"success\",\n          type: \"submit\",\n          disabled: !validateForm(),\n          onClick: handleLoginSubmit,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StyledSignupButton, {\n          name: \"signup-button\",\n          variant: signUpState ? \"success\" : \"outline-success\",\n          onClick: e => {\n            if (signUpState) {\n              setSignUpState(false);\n            } else {\n              setSignUpState(true);\n            }\n          },\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StyledSignupLoginContainer, {\n        children: /*#__PURE__*/_jsxDEV(StyledSignupButton, {\n          variant: \"success\",\n          type: \"button\",\n          onClick: handleClick,\n          children: \"Forgot Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LoginForm, \"sW1Z2yJxBEosSHzvzwFsLQe0Jug=\", false, function () {\n  return [useHistory];\n});\n\n_c7 = LoginForm;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"StyledForm\");\n$RefreshReg$(_c2, \"StyledLabel\");\n$RefreshReg$(_c3, \"StyledSignupLoginContainer\");\n$RefreshReg$(_c4, \"StyledLoginButton\");\n$RefreshReg$(_c5, \"StyledSignupButton\");\n$RefreshReg$(_c6, \"StyledSignUpSubmitButton\");\n$RefreshReg$(_c7, \"LoginForm\");","map":{"version":3,"sources":["/home/whiteknight/Desktop/capstone/OldCapstoneProject/front/src/components/Login/LoginForm.tsx"],"names":["React","useState","styled","axios","useHistory","Form","Button","routes","StyledForm","StyledLabel","Label","StyledSignupLoginContainer","div","StyledLoginButton","StyledSignupButton","StyledSignUpSubmitButton","LoginForm","email","setEmail","username","setUserName","password","setPassword","verifyPassword","setVerifyPassword","signUpState","setSignUpState","history","handleClick","push","validateForm","length","validateSignUp","handleLoginSubmit","event","preventDefault","newLoginRequest","setUsername","sessionStorage","setItem","sendLoginRequest","resp","post","login","withCredentials","console","log","data","alert","err","error","handleSignupSubmit","newSignupRequest","sendSignupRequest","signup","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, SyntheticEvent } from \"react\";\nimport styled from \"styled-components\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { routes } from \"../../util/config\";\n\nconst StyledForm = styled(Form)`\n  width: 100%;\n  margin: auto;\n`;\nconst StyledLabel = styled(Form.Label)`\n  color: white;\n`;\n\nconst StyledSignupLoginContainer = styled.div`\n  margin-top: 20px;\n  display: flex;\n`;\nconst StyledLoginButton = styled(Button)`\n  width: 50%;\n`;\n\nconst StyledSignupButton = styled(Button)`\n  width: 50%;\n`;\n\nconst StyledSignUpSubmitButton = styled(Button)`\n  margin-top: 10px;\n`;\n\nexport const LoginForm = (): JSX.Element => {\n  const [email, setEmail] = useState(\"\");\n  const [username, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [verifyPassword, setVerifyPassword] = useState(\"\");\n  const [signUpState, setSignUpState] = useState(false);\n\n  const history = useHistory();\n  const handleClick = () => history.push(\"/reset/verify-user\");\n\n  function validateForm() {\n    return username.length > 0 && password.length > 0 && !signUpState;\n  }\n\n  function validateSignUp() {\n    return (\n      password === verifyPassword && email.length > 0 && username.length > 0\n    );\n  }\n\n  function handleLoginSubmit(event: SyntheticEvent) {\n    event.preventDefault();\n\n    const newLoginRequest = {\n      username: username,\n      password: password,\n    };\n\n    // Was added for testing navbar, but may actually work for future use\n    function setUsername() {\n      return sessionStorage.setItem('username', newLoginRequest.username);\n    }\n\n    const sendLoginRequest = async () => {\n      try {\n        const resp = await axios.post(routes.login, newLoginRequest, { withCredentials: true });\n        console.log(resp.data);\n        if (resp.data === \"Success\") {\n          setUsername(); // added for testing navbar\n          history.push(\"/landing\");\n        } else if (resp.data === \"Failed\") {\n          alert(\"Sorry, wrong username or password. Please try again!\")\n        }\n      } catch (err) {\n        // Handle Error Here\n        console.error(err);\n        alert(\"Login Failed\");\n      }\n    };\n    sendLoginRequest();\n  }\n\n  function handleSignupSubmit(event: SyntheticEvent) {\n    const newSignupRequest = {\n      username: username,\n      email: email,\n      password: password,\n    };\n\n    const sendSignupRequest = async () => {\n      try {\n        const resp = await axios.post(routes.signup, newSignupRequest);\n        console.log(resp.data);\n        if (resp.data === \"Success\") {\n          alert(\"Account Creation Successful! Redirecting to login\")\n          history.push(\"/\");\n          setSignUpState(false);\n          setUserName(\"\");\n          setPassword(\"\");\n        } else if (resp.data === \"Email Already Exists\") {\n          alert(\"Sorry, user already exists\")\n        }\n        else if (resp.data === \"Emailed\") {\n          alert(\"This email already exists in our system. To claim your account, please follow the link emailed to you.\")\n        }\n      } catch (err) {\n        alert(\"Sign up failed\");\n        // Handle Error Here\n        console.error(err);\n      }\n    };\n    sendSignupRequest();\n  }\n\n  return (\n    <div className=\"Login\">\n      <StyledForm>\n        <Form.Group controlId=\"username\">\n          <StyledLabel>Username</StyledLabel>\n          <Form.Control\n            autoFocus\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUserName(e.target.value)}\n          />\n        </Form.Group>\n        {!signUpState && (\n          <Form.Group controlId=\"password\">\n            <StyledLabel>Password</StyledLabel>\n            <Form.Control\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </Form.Group>\n        )}\n        {signUpState && (\n          <>\n            <Form.Group controlId=\"email\">\n              <StyledLabel>Email</StyledLabel>\n              <Form.Control\n                autoFocus\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"password\">\n              <StyledLabel>Password</StyledLabel>\n              <Form.Control\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n              />\n            </Form.Group>\n            <Form.Group controlId=\"confirmPassword\">\n              <StyledLabel>Confirm Password</StyledLabel>\n              <Form.Control\n                type=\"password\"\n                value={verifyPassword}\n                onChange={(e) => setVerifyPassword(e.target.value)}\n              />\n            </Form.Group>\n            <StyledSignUpSubmitButton\n              type=\"button\"\n              disabled={!validateSignUp()}\n              onClick={handleSignupSubmit}\n            >\n              Submit\n            </StyledSignUpSubmitButton>\n          </>\n        )}\n        <StyledSignupLoginContainer>\n          <StyledLoginButton\n            variant=\"success\"\n            type = \"submit\"\n            disabled={!validateForm()}\n            onClick={handleLoginSubmit}\n          >\n            Login\n          </StyledLoginButton>\n          <StyledSignupButton\n            name=\"signup-button\"\n            variant={signUpState ? \"success\" : \"outline-success\"}\n            onClick={(e: SyntheticEvent) => {\n              if (signUpState) {\n                setSignUpState(false);\n              } else {\n                setSignUpState(true);\n              }\n            }}\n          >\n            Sign Up\n          </StyledSignupButton>\n        </StyledSignupLoginContainer>\n        <StyledSignupLoginContainer>\n        <StyledSignupButton\n            variant=\"success\"\n            type=\"button\"\n            onClick={handleClick}\n          >\n            Forgot Password\n          </StyledSignupButton>\n        </StyledSignupLoginContainer>\n        \n      </StyledForm>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}